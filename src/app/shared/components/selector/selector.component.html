<p-dialog
  [visible]="visible()"
  styleClass="w-150 max-w-9/10"
  [header]="header()"
  modal="true"
  closable="true"
  draggable="false"
  resizable="false"
  dismissableMask="true"
  (visibleChange)="visibleChanged($event)"
>
  <div class="flex flex-col gap-0.5">
    <input
      #searchInput
      pInputText
      type="text"
      [placeholder]="placeholder()"
      [(ngModel)]="searchTerms"
    />

    @for (item of filteredItems(); track item.id; let i = $index) {
      <div
        class="cursor-pointer rounded-lg p-2 shadow-xs transition-colors"
        [class]="selectedIndex() === i ? 'bg-primary text-primary-contrast' : 'bg-primary/1'"
        (click)="select(item)"
        (mouseenter)="onMouseEnter(i)"
      >
        @if (itemTemplate()) {
          <ng-template
            [ngTemplateOutlet]="itemTemplate()"
            [ngTemplateOutletContext]="{ $implicit: item }"
          />
        } @else {
          <span>{{ item.label }}</span>
        }
      </div>
    }
  </div>

  @if (actionsTemplate()) {
    <ng-template #footer>
      <ng-template [ngTemplateOutlet]="actionsTemplate()" />
    </ng-template>
  }
</p-dialog>
